<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Settings - AEL DWSS System</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 侧边栏 -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-water"></i>
            </div>
            <h2>AEL DWSS</h2>
        </div>
        
        <button class="toggle-btn">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <ul class="menu">
            <li>
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="sitediary.html">
                    <i class="fas fa-book"></i>
                    <span class="menu-text">Site Diary</span>
                </a>
            </li>
            <li>
                <a href="safetyinspect.html">
                    <i class="fas fa-clipboard-check"></i>
                    <span class="menu-text">Safety Inspection</span>
                </a>
            </li>
            <li>
                <a href="sitelocations.html">
                    <i class="fas fa-map-marked-alt"></i>
                    <span class="menu-text">Site Locations</span>
                </a>
            </li>
            <li>
                <a href="labourwage.html">
                    <i class="fas fa-money-bill-wave"></i>
                    <span class="menu-text">Labour Wage</span>
                </a>
            </li>
            <li>
                <a href="settings.html">
                    <i class="fas fa-cogs"></i>
                    <span class="menu-text">System Settings</span>
                </a>
            </li>
            <li>
                <a href="usermanagement.html">
                    <i class="fas fa-user-circle"></i>
                    <span class="menu-text">User Management</span>
                </a>
            </li>
        </ul>
    </div>
    
    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="header">
            <h1>System Settings</h1>
            <div class="header-controls">
                <div class="user-date-row">
                    <div class="date-display">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="current-date">September 17, 2025</span>
                    </div>
                    <button class="user-btn">
                        <i class="fas fa-user"></i> John Doe
                    </button>
                </div>
            </div>
        </div>
        
        <div class="search-buttons">
            <form id="search-form" action="#" method="get">
                <input type="text" name="search" placeholder="Search settings..." />
                <button type="submit">Search</button>
            </form>
        </div>
        
        <div class="dashboard">
            <h2>System Configuration</h2>
            <p>Configure system preferences, appearance, and integration settings. Changes will be applied system-wide.</p>
            
            <!-- 设置卡片布局 -->
            <div class="feature-cards">
                <!-- 显示设置卡片 -->
                <div class="feature-card display-settings">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">
                                <i class="fas fa-desktop"></i>
                            </div>
                            <span>Display Settings</span>
                        </div>
                        <div class="card-badge">
                            <i class="fas fa-check-circle"></i> Active
                        </div>
                    </div>
                    
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="theme">Theme</label>
                            <select id="theme" class="form-control">
                                <option value="light">Light Theme</option>
                                <option value="dark">Dark Theme</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="language">Language</label>
                            <select id="language" class="form-control">
                                <option value="en">English</option>
                                <option value="zh">中文</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="date-format">Date Format</label>
                            <select id="date-format" class="form-control">
                                <option value="dd-mm-yyyy">DD-MM-YYYY</option>
                                <option value="mm-dd-yyyy">MM-DD-YYYY</option>
                                <option value="yyyy-mm-dd">YYYY-MM-DD</option>
                            </select>
                        </div>            
                        <div class="form-group">
                            <label for="results-per-page">Results Per Page</label>
                            <select id="results-per-page" class="form-control">
                                <option value="10">10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Display Settings
                            </button>
                            <button class="btn btn-secondary">
                                <i class="fas fa-undo"></i> Reset to Default
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 初始PDF上传卡片 -->
                <div class="feature-card pdf-upload">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <span>Initial PDF Upload</span>
                        </div>
                        <div class="card-badge">
                            <i class="fas fa-exclamation-circle"></i> Required
                        </div>
                    </div>
                    
                    <div class="settings-form">
                        <div class="form-group">
                            <label>Current PDF Files</label>
                            <div class="file-list">
                                <div class="file-item">
                                    <i class="fas fa-file-pdf"></i>
                                    <span>Site_Diary_Template.pdf</span>
                                    <span class="file-size">(2.4 MB)</span>
                                    <button class="btn-icon"><i class="fas fa-download"></i></button>
                                    <button class="btn-icon delete"><i class="fas fa-trash"></i></button>
                                </div>
                                <div class="file-item">
                                    <i class="fas fa-file-pdf"></i>
                                    <span>Safety_Checklist.pdf</span>
                                    <span class="file-size">(1.8 MB)</span>
                                    <button class="btn-icon"><i class="fas fa-download"></i></button>
                                    <button class="btn-icon delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="pdf-upload">Upload New PDF</label>
                            <div class="upload-area" id="pdf-upload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop PDF files here or click to browse</p>
                                <input type="file" accept=".pdf" multiple style="display: none;">
                                <button class="btn btn-outline">Select Files</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="auto-process">Auto-process Settings</label>
                            <div class="checkbox-group">
                                <input type="checkbox" id="auto-process" checked>
                                <label for="auto-process">Automatically process uploaded PDFs</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="overwrite-existing">
                                <label for="overwrite-existing">Overwrite existing files with same name</label>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-upload"></i> Upload & Process
                            </button>
                            <button class="btn btn-secondary">
                                <i class="fas fa-sync"></i> Refresh List
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 电邮设置卡片 -->
                <div class="feature-card email-settings">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <span>Email Settings</span>
                        </div>
                        <div class="card-badge">
                            <i class="fas fa-check-circle"></i> Configured
                        </div>
                    </div>
                    
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="smtp-server">SMTP Server</label>
                            <input type="text" id="smtp-server" class="form-control" value="smtp.office365.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="smtp-port">SMTP Port</label>
                            <input type="number" id="smtp-port" class="form-control" value="587">
                        </div>
                        
                        <div class="form-group">
                            <label for="email-username">Email Username</label>
                            <input type="text" id="email-username" class="form-control" value="noreply@aeldwss.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="email-password">Email Password</label>
                            <div class="password-input">
                                <input type="password" id="email-password" class="form-control" value="••••••••">
                                <button class="btn-icon toggle-password"><i class="fas fa-eye"></i></button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="from-address">From Address</label>
                            <input type="email" id="from-address" class="form-control" value="noreply@aeldwss.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="from-name">From Name</label>
                            <input type="text" id="from-name" class="form-control" value="AEL DWSS System">
                        </div>
                        
                        <div class="form-group">
                            <label>Email Notifications</label>
                            <div class="checkbox-group">
                                <input type="checkbox" id="notify-diary" checked>
                                <label for="notify-diary">Site diary submissions</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="notify-safety" checked>
                                <label for="notify-safety">Safety inspection alerts</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="notify-system">
                                <label for="notify-system">System updates</label>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Email Settings
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-paper-plane"></i> Test Configuration
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 下载路径设置卡片 -->
                <div class="feature-card download-settings">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <span>Download Path Settings</span>
                        </div>
                        <div class="card-badge">
                            <i class="fas fa-exclamation-triangle"></i> Needs Review
                        </div>
                    </div>
                    
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="default-download-path">Default Download Path</label>
                            <div class="path-input">
                                <input type="text" id="default-download-path" class="form-control" value="C:\Users\JohnDoe\Downloads\AEL_DWSS">
                                <button class="btn btn-outline browse-btn">Browse</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="folder-structure">Folder Structure</label>
                            <select id="folder-structure" class="form-control">
                                <option value="flat">Flat Structure (all files in one folder)</option>
                                <option value="by-date">Organize by Date (YYYY/MM/DD)</option>
                                <option value="by-type" selected>Organize by Document Type</option>
                                <option value="by-site">Organize by Site</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>File Naming Convention</label>
                            <div class="radio-group">
                                <input type="radio" id="naming-original" name="naming" checked>
                                <label for="naming-original">Keep original filename</label>
                            </div>
                            <div class="radio-group">
                                <input type="radio" id="naming-timestamp" name="naming">
                                <label for="naming-timestamp">Timestamp prefix (YYYYMMDD_HHMMSS_)</label>
                            </div>
                            <div class="radio-group">
                                <input type="radio" id="naming-site" name="naming">
                                <label for="naming-site">Site code prefix</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Automatic Downloads</label>
                            <div class="checkbox-group">
                                <input type="checkbox" id="auto-download-reports" checked>
                                <label for="auto-download-reports">Auto-download generated reports</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="auto-download-backups">
                                <label for="auto-download-backups">Auto-download system backups</label>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Path Settings
                            </button>
                            <button class="btn btn-outline">
                                <i class="fas fa-folder-open"></i> Open Download Folder
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>&copy; 2025 AEL DWSS System. All rights reserved.</p>
            <p>AEL DWSS Platform</p>
        </footer>
    </div>

    <script src="scripts/theme-config.js"></script>
    <script src="scripts/app.js"></script>
    <script>
        // 设置页面特定功能
        document.addEventListener('DOMContentLoaded', function() {
            // 设置当前日期
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
            
            // 侧边栏切换功能
            const toggleBtn = document.querySelector('.toggle-btn');
            const sidebar = document.querySelector('.sidebar');
            
            toggleBtn.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
            });
            
            // 密码显示/隐藏切换
            const togglePasswordBtns = document.querySelectorAll('.toggle-password');
            togglePasswordBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const passwordInput = this.parentElement.querySelector('input');
                    if (passwordInput.type === 'password') {
                        passwordInput.type = 'text';
                        this.innerHTML = '<i class="fas fa-eye-slash"></i>';
                    } else {
                        passwordInput.type = 'password';
                        this.innerHTML = '<i class="fas fa-eye"></i>';
                    }
                });
            });
            
            // 文件上传区域点击事件
            const uploadAreas = document.querySelectorAll('.upload-area');
            uploadAreas.forEach(area => {
                const fileInput = area.querySelector('input[type="file"]');
                const selectBtn = area.querySelector('.btn');
                
                area.addEventListener('click', function(e) {
                    if (e.target !== selectBtn) {
                        fileInput.click();
                    }
                });
                
                selectBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    fileInput.click();
                });
                
                fileInput.addEventListener('change', function() {
                    if (this.files.length > 0) {
                        area.classList.add('has-file');
                        area.querySelector('p').textContent = `${this.files.length} file(s) selected`;
                    }
                });
            });
        });

 // 设置保存功能
document.addEventListener('DOMContentLoaded', function() {
    // 初始化设置表单的值
    const config = ThemeConfig.init();
    document.getElementById('theme').value = config.theme;
    document.getElementById('language').value = config.language;
    document.getElementById('date-format').value = config.dateFormat;
    
    // 主题切换
    document.getElementById('theme').addEventListener('change', function() {
        ThemeConfig.save({ theme: this.value });
    });
    
    // 语言切换
    document.getElementById('language').addEventListener('change', function() {
        ThemeConfig.save({ language: this.value });
        // 更新语言显示
        ThemeConfig.updateLanguage();
    });
    
    // 日期格式切换
    document.getElementById('date-format').addEventListener('change', function() {
        ThemeConfig.save({ dateFormat: this.value });
    });
    
    // 保存设置按钮
    document.querySelector('.display-settings .btn-primary').addEventListener('click', function() {
        const settings = {
            theme: document.getElementById('theme').value,
            language: document.getElementById('language').value,
            dateFormat: document.getElementById('date-format').value
        };
        ThemeConfig.save(settings);
        
        // 显示对应语言的提示
        const message = settings.language === 'zh' ? '设置已保存！' : 'Settings saved!';
        alert(message);
    });
    
    // 重置设置按钮
    document.querySelector('.display-settings .btn-secondary').addEventListener('click', function() {
        const currentLang = ThemeConfig.current.language;
        const message = currentLang === 'zh' ? 
            '确定要重置为默认设置吗？' : 'Are you sure you want to reset to default settings?';
        const successMessage = currentLang === 'zh' ? 
            '设置已重置！' : 'Settings reset!';
            
        if(confirm(message)) {
            localStorage.removeItem('ael_dwss_theme');
            localStorage.removeItem('ael_dwss_language');
            localStorage.removeItem('ael_dwss_dateFormat');
            ThemeConfig.init();
            
            // 更新表单值
            document.getElementById('theme').value = ThemeConfig.current.theme;
            document.getElementById('language').value = ThemeConfig.current.language;
            document.getElementById('date-format').value = ThemeConfig.current.dateFormat;
            
            alert(successMessage);
        }
    });
});
    </script>
    
    <style>
        /* 设置页面特定样式 */
        .settings-form {
            padding: 0 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        .form-control:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .password-input, .path-input {
            display: flex;
            gap: 10px;
        }
        
        .password-input .form-control, .path-input .form-control {
            flex: 1;
        }
        
        .btn-icon {
            background: transparent;
            border: none;
            color: #7f8c8d;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .btn-icon:hover {
            background: #f0f0f0;
            color: #3498db;
        }
        
        .btn-icon.delete:hover {
            color: #e74c3c;
        }
        
        .checkbox-group, .radio-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .checkbox-group input, .radio-group input {
            margin-right: 10px;
        }
        
        .checkbox-group label, .radio-group label {
            margin-bottom: 0;
            font-weight: normal;
        }
        
        .file-list {
            border: 1px solid #e0e6ed;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .file-item:last-child {
            border-bottom: none;
        }
        
        .file-item i {
            color: #e74c3c;
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .file-item span {
            flex: 1;
        }
        
        .file-size {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-left: 10px;
        }
        
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #3498db;
            background: #f8fafc;
        }
        
        .upload-area.has-file {
            border-color: #2ecc71;
            background: #f0f9f4;
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .upload-area p {
            margin-bottom: 15px;
            color: #7f8c8d;
        }
        
        .settings-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eaeaea;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #2471a3);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid #3498db;
            color: #3498db;
        }
        
        .btn-outline:hover {
            background: #3498db;
            color: white;
        }
        
        .browse-btn {
            white-space: nowrap;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .password-input, .path-input {
                flex-direction: column;
            }
            
            .settings-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</body>
</html>